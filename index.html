<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>東北雪國多巴胺極限之旅</title>
    <!-- 載入 React 框架 -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- 載入 Babel 用於解析 JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 載入 Lucide 圖示 -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        #root { height: 100%; }
        /* 自定義捲軸樣式 */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // 模擬 Lucide React 圖示組件
        const Icon = ({ name, className }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const App = () => {
            const [activeDay, setActiveDay] = useState(1);

            // 定義座標系統 (SVG 500x800)
            const locations = {
                tpe: { x: 50, y: 750, name: '台北桃園' },
                sdj_air: { x: 340, y: 660, name: '仙台機場', pref: '宮城' },
                sendai: { x: 300, y: 600, name: '仙台市', pref: '宮城' },
                appi: { x: 280, y: 150, name: '安比高原', pref: '岩手' },
                ginzan: { x: 180, y: 400, name: '銀山溫泉', pref: '山形' },
                yamadera: { x: 220, y: 550, name: '山寺', pref: '山形' },
                zao: { x: 180, y: 620, name: '藏王/狐狸村', pref: '宮城/山形' },
            };

            // 在資料結構中新增 'dinner' 欄位
            const days = [
                { 
                    day: 1, 
                    title: '抵達雪國', 
                    path: ['tpe', 'sdj_air', 'appi'], 
                    desc: '桃園飛往仙台，直奔安比高原。享用星宇機上餐，抵達後接駁巴士直達飯店，開啟雪國之夜。', 
                    icon: 'plane',
                    date: '02/01',
                    dinner: '飯店居酒屋 / Room Service'
                },
                { 
                    day: 2, 
                    title: '安比燒肉', 
                    path: ['appi'], 
                    desc: '早晨岩手優格補充能量，整日征服前山滑道。晚上享用燒肉大餐，補充消耗的熱量。', 
                    icon: 'snowflake',
                    date: '02/02',
                    dinner: '李朝苑 前澤牛燒肉'
                },
                { 
                    day: 3, 
                    title: '溫泉修復', 
                    path: ['appi'], 
                    desc: '前往西館山滑道避開人潮，午後享受白樺之湯露天溫泉，修復肌肉疲勞。', 
                    icon: 'waves',
                    date: '02/03',
                    dinner: '和食 七時雨 懷石料理'
                },
                { 
                    day: 4, 
                    title: '法式慶功', 
                    path: ['appi'], 
                    desc: '挑戰長距離滑行，下午雪上摩托車樂園。晚上舉辦慶功宴，享受最後的安比之夜。', 
                    icon: 'party-popper',
                    date: '02/04',
                    dinner: 'Lapin d\'Or 法式料理'
                },
                { 
                    day: 5, 
                    title: '移動日', 
                    path: ['appi', 'sendai'], 
                    desc: '告別安比，移動至仙台。入住河原町包棟民宿，晚上直奔頂級燒肉名店。', 
                    icon: 'car',
                    date: '02/05',
                    dinner: '米澤牛/仙台牛 燒肉 (仔虎/和火一)'
                },
                { 
                    day: 6, 
                    title: '銀山山寺', 
                    path: ['sendai', 'yamadera', 'ginzan', 'sendai'], 
                    desc: '挑戰山寺千階雪梯絕景，午後前往銀山溫泉體驗大正浪漫。晚上回仙台品嚐極致口感牛舌。', 
                    icon: 'map-pin',
                    date: '02/06',
                    dinner: '閣 牛舌料理 (必點牛舌刺身)'
                },
                { 
                    day: 7, 
                    title: '樹冰狐狸', 
                    path: ['sendai', 'zao', 'sendai'], 
                    desc: '包車一日遊：早鳥衝藏王樹冰看雪怪，下午藏王狐狸村抱狐狸。晚上探索在地居酒屋。', 
                    icon: 'camera',
                    date: '02/07',
                    dinner: '仙台商店街 (Happy Road) 居酒屋'
                },
                { 
                    day: 8, 
                    title: '完美歸賦', 
                    path: ['sendai', 'sdj_air', 'tpe'], 
                    desc: '仙台朝市海鮮丼早餐，仙台城跡巡禮。S-PAL 最後採買伴手禮，帶著滿滿回憶返台。', 
                    icon: 'plane',
                    date: '02/08',
                    dinner: '機上餐 / 溫暖的家'
                },
            ];

            const currentDay = days.find(d => d.day === activeDay);

            return (
                <div className="flex flex-col md:flex-row h-full w-full bg-slate-50 font-sans p-4 gap-4 overflow-hidden">
                    {/* 左側地圖面板 */}
                    <div className="flex-1 bg-white rounded-3xl shadow-xl relative p-6 flex items-center justify-center overflow-hidden min-h-[500px]">
                        <div className="absolute top-6 left-6 z-10 pointer-events-none">
                            <h2 className="text-2xl font-bold text-slate-800 tracking-tight">東北多巴胺極限之旅</h2>
                            <p className="text-slate-500 font-medium">Day {activeDay} ({currentDay.date}): {currentDay.title}</p>
                        </div>

                        <svg viewBox="0 0 500 800" className="w-full h-full max-h-[750px] select-none">
                            <path d="M220,100 Q400,50 480,250 T420,600 T300,780 T100,650 T120,200 Z" fill="#f8fafc" stroke="#cbd5e1" strokeWidth="2" />
                            <path d="M120,500 Q300,480 450,520" fill="none" stroke="#e2e8f0" strokeWidth="1.5" strokeDasharray="4" />
                            <text x="380" y="500" className="fill-slate-300 text-[10px]">宮城 / 岩手</text>

                            {days.map((d) => {
                                if (d.path.length < 2) return null;
                                return d.path.map((loc, idx) => {
                                    if (idx === 0) return null;
                                    const start = locations[d.path[idx - 1]];
                                    const end = locations[loc];
                                    const isCurrentDay = activeDay === d.day;
                                    
                                    return (
                                        <g key={`path-${d.day}-${idx}`}>
                                            <line 
                                                x1={start.x} y1={start.y} x2={end.x} y2={end.y} 
                                                stroke="#f1f5f9" strokeWidth="2"
                                            />
                                            <line
                                                x1={start.x} y1={start.y} x2={end.x} y2={end.y}
                                                stroke={isCurrentDay ? "#3b82f6" : "transparent"}
                                                strokeWidth="4" strokeLinecap="round"
                                                className="transition-all duration-700"
                                                strokeDasharray={isCurrentDay ? "5 0" : "0 1000"} 
                                            />
                                        </g>
                                    );
                                });
                            })}

                            {Object.entries(locations).map(([key, loc]) => {
                                const isActive = currentDay.path.includes(key);
                                return (
                                    <g key={key} className="transition-all duration-300">
                                        {isActive && (
                                            <circle cx={loc.x} cy={loc.y} r="12" fill="#3b82f6" opacity="0.2">
                                                <animate attributeName="r" from="8" to="20" dur="1.5s" repeatCount="indefinite" />
                                                <animate attributeName="opacity" from="0.4" to="0" dur="1.5s" repeatCount="indefinite" />
                                            </circle>
                                        )}
                                        <circle cx={loc.x} cy={loc.y} r={isActive ? 6 : 4} fill={isActive ? "#2563eb" : "#94a3b8"} stroke="white" strokeWidth="2" />
                                        <text x={loc.x + 10} y={loc.y + 4} className={`text-[12px] font-bold transition-colors duration-300 ${isActive ? "fill-slate-800" : "fill-slate-400"}`}>{loc.name}</text>
                                    </g>
                                );
                            })}
                        </svg>
                    </div>

                    {/* 右側資訊面板 */}
                    <div className="w-full md:w-96 flex flex-col gap-4 overflow-hidden">
                        <div className="grid grid-cols-4 gap-2 shrink-0">
                            {days.map((d) => (
                                <button
                                    key={d.day} onClick={() => setActiveDay(d.day)}
                                    className={`py-2 rounded-xl text-sm font-bold transition-all border ${
                                        activeDay === d.day 
                                        ? "bg-blue-600 text-white border-blue-600 shadow-md transform scale-105" 
                                        : "bg-white text-slate-400 border-slate-100 hover:border-blue-200 hover:text-blue-500"
                                    }`}
                                >
                                    D{d.day}
                                </button>
                            ))}
                        </div>

                        <div className="bg-white rounded-2xl p-6 shadow-lg border-t-4 border-blue-600 flex-1 overflow-y-auto">
                            <div className="flex justify-between items-start mb-4">
                                <div>
                                    <div className="text-xs font-bold text-blue-500 mb-1 tracking-wider uppercase">Schedule</div>
                                    <h3 className="text-2xl font-bold text-slate-800">{currentDay.title}</h3>
                                </div>
                                <div className="p-3 bg-blue-50 text-blue-600 rounded-full shadow-inner">
                                    <Icon name={currentDay.icon} className="w-6 h-6" />
                                </div>
                            </div>
                            
                            <div className="flex items-center gap-2 mb-6">
                                <span className="px-3 py-1 bg-slate-100 text-slate-600 text-xs rounded-full font-mono">
                                    2026/{currentDay.date}
                                </span>
                                <span className="px-3 py-1 bg-green-100 text-green-700 text-xs rounded-full font-bold">
                                    {currentDay.path.length > 1 ? "移動日" : "定點活動"}
                                </span>
                            </div>

                            <div className="mb-6">
                                <h4 className="text-sm font-bold text-slate-400 mb-2 uppercase tracking-wide">本日亮點</h4>
                                <p className="text-slate-600 leading-relaxed text-sm bg-slate-50 p-4 rounded-xl border border-slate-100">
                                    {currentDay.desc}
                                </p>

                                {/* 新增：晚餐區塊 */}
                                <div className="mt-4 p-3 bg-orange-50 rounded-xl border border-orange-100 flex items-center gap-3 shadow-sm">
                                    <div className="p-2 bg-white text-orange-500 rounded-full shadow-sm flex-shrink-0">
                                        <Icon name="utensils" className="w-4 h-4" />
                                    </div>
                                    <div>
                                        <div className="text-[10px] font-bold text-orange-400 uppercase tracking-wide">Dinner</div>
                                        <div className="text-orange-900 font-bold text-sm">{currentDay.dinner}</div>
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-4">
                                <h4 className="text-sm font-bold text-slate-400 uppercase tracking-wide">移動路線</h4>
                                <div className="relative pl-2">
                                    <div className="absolute left-[19px] top-2 bottom-4 w-0.5 bg-slate-200 -z-10"></div>
                                    {currentDay.path.map((locKey, idx) => (
                                        <div key={idx} className="flex items-center gap-4 mb-4 last:mb-0 group">
                                            <div className="w-9 h-9 rounded-full bg-white border-2 border-slate-200 text-slate-400 flex items-center justify-center text-xs font-bold shadow-sm z-10 group-hover:border-blue-400 group-hover:text-blue-500 transition-colors">
                                                {idx + 1}
                                            </div>
                                            <div className="flex-1 p-3 rounded-lg border border-slate-100 bg-white shadow-sm hover:shadow-md transition-shadow">
                                                <div className="text-slate-800 font-bold text-sm">{locations[locKey].name}</div>
                                                <div className="text-slate-400 text-xs">{locations[locKey].pref || '交通節點'}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
