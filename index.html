<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>東北雪國多巴胺極限之旅</title>
    <!-- 載入 React 框架 -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- 載入 Babel 用於解析 JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 載入 Lucide 圖示 -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* 鎖定畫面高度，防止回彈效果，營造 App 質感 */
        body, html { 
            margin: 0; 
            padding: 0; 
            height: 100%; 
            width: 100%;
            overflow: hidden; 
            background-color: #f8fafc;
            -webkit-font-smoothing: antialiased;
        }
        #root { height: 100%; width: 100%; }
        
        /* 隱藏捲軸但保留功能 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icon = ({ name, className }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const App = () => {
            const [activeDay, setActiveDay] = useState(1);

            // 座標系統 (SVG 500x800)
            const locations = {
                tpe: { x: 50, y: 750, name: '台北桃園' },
                sdj_air: { x: 340, y: 660, name: '仙台機場', pref: '宮城' },
                sendai: { x: 300, y: 600, name: '仙台市', pref: '宮城' },
                appi: { x: 280, y: 150, name: '安比高原', pref: '岩手' },
                ginzan: { x: 180, y: 400, name: '銀山溫泉', pref: '山形' },
                yamadera: { x: 220, y: 550, name: '山寺', pref: '山形' },
                zao: { x: 180, y: 620, name: '藏王/狐狸村', pref: '宮城/山形' },
            };

            const days = [
                { 
                    day: 1, title: '抵達雪國', path: ['tpe', 'sdj_air', 'appi'], 
                    desc: '桃園飛往仙台，直奔安比高原。享用星宇機上餐，抵達後接駁巴士直達飯店，開啟雪國之夜。', 
                    icon: 'plane', date: '02/01', dinner: '飯店居酒屋 / Room Service'
                },
                { 
                    day: 2, title: '安比燒肉', path: ['appi'], 
                    desc: '早晨岩手優格補充能量，整日征服前山滑道。晚上享用燒肉大餐，補充消耗的熱量。', 
                    icon: 'snowflake', date: '02/02', dinner: '李朝苑 前澤牛燒肉'
                },
                { 
                    day: 3, title: '溫泉修復', path: ['appi'], 
                    desc: '前往西館山滑道避開人潮，午後享受白樺之湯露天溫泉，修復肌肉疲勞。', 
                    icon: 'waves', date: '02/03', dinner: '和食 七時雨 懷石料理'
                },
                { 
                    day: 4, title: '法式慶功', path: ['appi'], 
                    desc: '挑戰長距離滑行，下午雪上摩托車樂園。晚上舉辦慶功宴，享受最後的安比之夜。', 
                    icon: 'party-popper', date: '02/04', dinner: 'Lapin d\'Or 法式料理'
                },
                { 
                    day: 5, title: '移動日', path: ['appi', 'sendai'], 
                    desc: '告別安比，移動至仙台。入住河原町包棟民宿，晚上直奔頂級燒肉名店。', 
                    icon: 'car', date: '02/05', dinner: '米澤牛/仙台牛 燒肉 (仔虎/和火一)'
                },
                { 
                    day: 6, title: '銀山山寺', path: ['sendai', 'yamadera', 'ginzan', 'sendai'], 
                    desc: '挑戰山寺千階雪梯絕景，午後前往銀山溫泉體驗大正浪漫。晚上回仙台品嚐極致口感牛舌。', 
                    icon: 'map-pin', date: '02/06', dinner: '閣 牛舌料理 (必點牛舌刺身)'
                },
                { 
                    day: 7, title: '樹冰狐狸', path: ['sendai', 'zao', 'sendai'], 
                    desc: '包車一日遊：早鳥衝藏王樹冰看雪怪，下午藏王狐狸村抱狐狸。晚上探索在地居酒屋。', 
                    icon: 'camera', date: '02/07', dinner: '仙台商店街 (Happy Road) 居酒屋'
                },
                { 
                    day: 8, title: '完美歸賦', path: ['sendai', 'sdj_air', 'tpe'], 
                    desc: '仙台朝市海鮮丼早餐，仙台城跡巡禮。S-PAL 最後採買伴手禮，帶著滿滿回憶返台。', 
                    icon: 'plane', date: '02/08', dinner: '機上餐 / 溫暖的家'
                },
            ];

            const currentDay = days.find(d => d.day === activeDay);

            return (
                <div className="flex flex-col md:flex-row h-full w-full bg-slate-50 relative overflow-hidden">
                    
                    {/* --- 地圖區域 (手機佔上半部 / 桌機佔左側) --- */}
                    <div className="w-full h-[60%] md:h-full md:flex-1 bg-white md:m-4 md:mr-0 md:rounded-3xl shadow-sm md:shadow-xl relative z-0 overflow-hidden group">
                        
                        {/* 標題 (浮動於地圖上) */}
                        <div className="absolute top-6 left-6 z-10 pointer-events-none drop-shadow-md">
                            <h2 className="text-2xl font-bold text-slate-800 tracking-tight">多巴胺之旅</h2>
                            <p className="text-slate-500 font-medium text-sm md:text-base">Day {activeDay} • {currentDay.title}</p>
                        </div>

                        <svg viewBox="0 0 500 800" className="w-full h-full object-cover select-none" preserveAspectRatio="xMidYMid meet">
                            {/* 地圖背景 */}
                            <path d="M220,100 Q400,50 480,250 T420,600 T300,780 T100,650 T120,200 Z" fill="#f8fafc" stroke="#cbd5e1" strokeWidth="2" />
                            <path d="M120,500 Q300,480 450,520" fill="none" stroke="#e2e8f0" strokeWidth="1.5" strokeDasharray="4" />
                            <text x="380" y="500" className="fill-slate-300 text-[10px]">宮城 / 岩手</text>

                            {/* 路徑連線 */}
                            {days.map((d) => {
                                if (d.path.length < 2) return null;
                                return d.path.map((loc, idx) => {
                                    if (idx === 0) return null;
                                    const start = locations[d.path[idx - 1]];
                                    const end = locations[loc];
                                    const isCurrentDay = activeDay === d.day;
                                    
                                    return (
                                        <g key={`path-${d.day}-${idx}`}>
                                            <line x1={start.x} y1={start.y} x2={end.x} y2={end.y} stroke="#f1f5f9" strokeWidth="2" />
                                            <line
                                                x1={start.x} y1={start.y} x2={end.x} y2={end.y}
                                                stroke={isCurrentDay ? "#3b82f6" : "transparent"}
                                                strokeWidth="5" strokeLinecap="round"
                                                className="transition-all duration-500"
                                                strokeDasharray={isCurrentDay ? "5 0" : "0 1000"} 
                                            />
                                        </g>
                                    );
                                });
                            })}

                            {/* 地點標記 */}
                            {Object.entries(locations).map(([key, loc]) => {
                                const isActive = currentDay.path.includes(key);
                                return (
                                    <g key={key} className="transition-all duration-300">
                                        {isActive && (
                                            <circle cx={loc.x} cy={loc.y} r="18" fill="#3b82f6" opacity="0.2">
                                                <animate attributeName="r" from="10" to="25" dur="1.5s" repeatCount="indefinite" />
                                                <animate attributeName="opacity" from="0.4" to="0" dur="1.5s" repeatCount="indefinite" />
                                            </circle>
                                        )}
                                        <circle cx={loc.x} cy={loc.y} r={isActive ? 8 : 5} fill={isActive ? "#2563eb" : "#94a3b8"} stroke="white" strokeWidth="2" />
                                        <text x={loc.x + 14} y={loc.y + 5} className={`text-[13px] font-bold transition-colors duration-300 ${isActive ? "fill-slate-900" : "fill-slate-400"}`}>{loc.name}</text>
                                    </g>
                                );
                            })}
                        </svg>
                    </div>

                    {/* --- 資訊面板 (手機佔下半部 / 桌機佔右側) --- */}
                    <div className="
                        w-full h-[45%] md:h-auto md:w-[400px] 
                        bg-white 
                        flex flex-col 
                        rounded-t-[2rem] md:rounded-3xl 
                        shadow-[0_-8px_30px_rgba(0,0,0,0.12)] md:shadow-xl 
                        z-10 relative 
                        -mt-8 md:mt-4 md:mb-4 md:mr-4 md:ml-0
                        transition-all duration-300 ease-out
                    ">
                        
                        {/* 拖曳條指示器 (僅手機顯示) */}
                        <div className="w-full flex justify-center pt-3 pb-1 md:hidden">
                            <div className="w-12 h-1.5 bg-slate-200 rounded-full"></div>
                        </div>

                        {/* 天數選擇器 (橫向捲動) */}
                        <div className="px-6 py-2 border-b border-slate-50">
                            <div className="flex gap-3 overflow-x-auto no-scrollbar pb-2 snap-x">
                                {days.map((d) => (
                                    <button
                                        key={d.day} onClick={() => setActiveDay(d.day)}
                                        className={`
                                            flex-shrink-0 snap-center
                                            px-4 py-2 rounded-full text-sm font-bold transition-all border 
                                            ${activeDay === d.day 
                                            ? "bg-blue-600 text-white border-blue-600 shadow-md scale-105" 
                                            : "bg-slate-50 text-slate-400 border-slate-100 hover:border-blue-200"}
                                        `}
                                    >
                                        D{d.day}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* 內容捲動區 */}
                        <div className="flex-1 overflow-y-auto p-6 pt-2 pb-20 md:pb-6">
                            {/* 標題區 */}
                            <div className="flex justify-between items-start mb-4 mt-2">
                                <div>
                                    <div className="flex items-center gap-2 mb-1">
                                        <span className="px-2 py-0.5 bg-blue-50 text-blue-600 text-[10px] rounded-md font-bold tracking-wider uppercase">
                                            2026/{currentDay.date}
                                        </span>
                                        <span className={`text-[10px] px-2 py-0.5 rounded-md font-bold ${currentDay.path.length > 1 ? 'bg-amber-50 text-amber-600' : 'bg-green-50 text-green-600'}`}>
                                            {currentDay.path.length > 1 ? "移動日" : "定點活動"}
                                        </span>
                                    </div>
                                    <h3 className="text-xl font-bold text-slate-800">{currentDay.title}</h3>
                                </div>
                                <div className="p-2.5 bg-blue-50 text-blue-600 rounded-xl shadow-sm">
                                    <Icon name={currentDay.icon} className="w-5 h-5" />
                                </div>
                            </div>

                            {/* 重點描述 */}
                            <div className="mb-5">
                                <p className="text-slate-600 leading-relaxed text-sm bg-slate-50 p-4 rounded-xl border border-slate-100">
                                    {currentDay.desc}
                                </p>
                            </div>

                            {/* 晚餐區塊 (Highlight) */}
                            <div className="mb-6 p-3 bg-orange-50/80 rounded-xl border border-orange-100 flex items-center gap-3">
                                <div className="p-2 bg-white text-orange-500 rounded-lg shadow-sm flex-shrink-0">
                                    <Icon name="utensils" className="w-4 h-4" />
                                </div>
                                <div className="flex-1">
                                    <div className="text-[10px] font-bold text-orange-400 uppercase tracking-wide">Dinner</div>
                                    <div className="text-slate-800 font-bold text-sm truncate">{currentDay.dinner}</div>
                                </div>
                            </div>

                            {/* 移動路線 */}
                            <div className="space-y-4">
                                <h4 className="text-xs font-bold text-slate-400 uppercase tracking-wide flex items-center gap-1">
                                    <Icon name="route" className="w-3 h-3" /> 當日動線
                                </h4>
                                <div className="relative pl-2">
                                    <div className="absolute left-[19px] top-2 bottom-4 w-0.5 bg-slate-200 -z-10"></div>
                                    {currentDay.path.map((locKey, idx) => (
                                        <div key={idx} className="flex items-center gap-4 mb-3 last:mb-0">
                                            <div className="w-9 h-9 rounded-full bg-white border-2 border-slate-200 text-slate-400 flex items-center justify-center text-xs font-bold shadow-sm z-10">
                                                {idx + 1}
                                            </div>
                                            <div className="flex-1 py-2 px-3 rounded-lg border border-slate-50 bg-white shadow-sm flex justify-between items-center">
                                                <div className="text-slate-800 font-bold text-sm">{locations[locKey].name}</div>
                                                <div className="text-slate-400 text-[10px] bg-slate-100 px-2 py-0.5 rounded-full">{locations[locKey].pref || '交通'}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
